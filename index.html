<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>çŸ­è¦–é »æ–‡å­—ç¨¿å¤šç¶­åº¦åˆ†æå·¥å…·ï¼ˆChatGPT ç‰ˆï¼‰</title>
  <meta name="description" content="ä½¿ç”¨ ChatGPT é€²è¡ŒçœŸå½è¾¨è­˜ã€è©é¨™æª¢æ¸¬èˆ‡å‰µæ–°è©•ä¼°çš„å…è²»å·¥å…·"/>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <style>
    body { font-family: system-ui, -apple-system, sans-serif; }
    pre { background: #f9fafb; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
  <div class="max-w-7xl mx-auto p-6">
    <div class="bg-white rounded-xl shadow-2xl overflow-hidden">
      <!-- Header -->
      <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-white">
        <h1 class="text-4xl font-bold flex items-center gap-4">
          <i data-lucide="file-text" class="w-10 h-10"></i>
          çŸ­è¦–é »æ–‡å­—ç¨¿å¤šç¶­åº¦åˆ†æå·¥å…·
        </h1>
        <p class="mt-3 text-lg opacity-90">ChatGPT é©…å‹•çš„çœŸå½è¾¨è­˜ã€è©é¨™æª¢æ¸¬èˆ‡å‰µæ–°è©•ä¼°ï¼ˆæ›´å¿«ã€æ›´çœï¼‰</p>
      </div>

      <div class="p-8 space-y-8">
        <!-- è¼¸å…¥æ–¹å¼é¸æ“‡ -->
        <div class="p-6 bg-gray-50 rounded-xl border border-gray-200">
          <h3 class="text-lg font-semibold mb-4">ğŸ“¥ é¸æ“‡è¼¸å…¥æ–¹å¼</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button id="mode-paste" class="mode-btn active px-6 py-4 rounded-lg bg-indigo-600 text-white font-medium flex items-center justify-center gap-3">
              <i data-lucide="edit-3" class="w-5 h-5"></i> è²¼ä¸Šæ–‡å­—
            </button>
            <button id="mode-file" class="mode-btn px-6 py-4 rounded-lg bg-white border border-gray-300 text-gray-700 font-medium flex items-center justify-center gap-3 hover:bg-gray-50">
              <i data-lucide="upload" class="w-5 h-5"></i> ä¸Šå‚³ TXT æª”æ¡ˆ
            </button>
            <button id="mode-sample" class="mode-btn px-6 py-4 rounded-lg bg-white border border-gray-300 text-gray-700 font-medium flex items-center justify-center gap-3 hover:bg-gray-50">
              <i data-lucide="play-circle" class="w-5 h-5"></i> ä½¿ç”¨ç¯„ä¾‹æ–‡å­—ç¨¿
            </button>
          </div>
        </div>

        <!-- è²¼ä¸Šæ–‡å­—å€åŸŸ -->
        <div id="paste-area" class="space-y-4">
          <label class="block text-lg font-semibold">è«‹è²¼ä¸ŠçŸ­è¦–é »æ–‡å­—ç¨¿å…§å®¹</label>
          <textarea id="transcript-input" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-4 focus:ring-indigo-300 focus:border-indigo-500 min-h-[300px] text-base" placeholder="åœ¨æ­¤è²¼ä¸Šå®Œæ•´çš„æ–‡å­—ç¨¿å…§å®¹..."></textarea>
          <button id="confirm-paste" class="px-8 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed">
            ç¢ºèªè¼¸å…¥ä¸¦æº–å‚™åˆ†æ
          </button>
        </div>

        <!-- æª”æ¡ˆä¸Šå‚³å€åŸŸ -->
        <div id="file-area" class="hidden space-y-4">
          <label class="block text-lg font-semibold">é¸æ“‡ TXT æª”æ¡ˆ</label>
          <input type="file" id="file-input" accept=".txt,text/plain" class="block w-full text-gray-700" />
        </div>

        <!-- åŸå§‹å…§å®¹é¡¯ç¤º -->
        <div id="original-content" class="hidden p-6 bg-gray-50 rounded-xl border">
          <h3 class="font-semibold text-lg mb-3 flex items-center gap-2">
            <i data-lucide="info" class="w-5 h-5"></i> æ–‡å­—ç¨¿å…§å®¹
          </h3>
          <pre id="content-display" class="text-gray-800 whitespace-pre-wrap"></pre>
        </div>

        <!-- åˆ†ææŒ‰éˆ• -->
        <div id="analyze-section" class="hidden flex gap-4">
          <button id="analyze-btn" class="flex-1 py-4 bg-indigo-600 text-white rounded-lg font-bold text-lg flex items-center justify-center gap-3 hover:bg-indigo-700 disabled:opacity-50">
            <i data-lucide="brain" class="w-6 h-6"></i>
            <span>é–‹å§‹ ChatGPT æ·±åº¦åˆ†æ</span>
          </button>
          <button id="export-btn" class="hidden py-4 px-8 bg-green-600 text-white rounded-lg font-bold flex items-center gap-3 hover:bg-green-700">
            <i data-lucide="download" class="w-6 h-6"></i>
            åŒ¯å‡º Markdown å ±å‘Š
          </button>
        </div>

        <!-- åˆ†æä¸­ -->
        <div id="analyzing" class="hidden text-center py-12">
          <i data-lucide="loader-2" class="w-16 h-16 animate-spin text-indigo-600 mx-auto mb-4"></i>
          <p class="text-xl text-gray-700">ChatGPT æ­£åœ¨åˆ†æä¸­ï¼Œè«‹ç¨å€™ï¼ˆé€šå¸¸ 5-15 ç§’ï¼‰...</p>
        </div>

        <!-- åˆ†æçµæœ -->
        <div id="result" class="hidden space-y-8"></div>

        <!-- éŒ¯èª¤è¨Šæ¯ -->
        <div id="error-msg" class="hidden p-6 bg-red-50 border border-red-200 rounded-xl">
          <h3 class="font-bold text-red-800 flex items-center gap-2">
            <i data-lucide="alert-triangle" class="w-6 h-6"></i> ç™¼ç”ŸéŒ¯èª¤
          </h3>
          <p class="mt-2 text-red-700" id="error-text"></p>
        </div>

        <!-- OpenAI API Key è¨­å®š -->
        <div class="p-6 bg-amber-50 border border-amber-200 rounded-xl">
          <p class="text-amber-900 font-medium">
            âš ï¸ æœ¬å·¥å…·éœ€è¦ <strong>OpenAI API Key</strong>ï¼ˆChatGPT APIï¼‰æ‰èƒ½é‹ä½œã€‚<br/>
            è«‹åˆ° <a href="https://platform.openai.com/api-keys" target="_blank" class="underline">OpenAI å®˜ç¶²</a> ç™»å…¥å¾Œå»ºç«‹ä¸€çµ„ API Keyï¼ˆsk-...é–‹é ­ï¼‰ï¼Œç„¶å¾Œè²¼åœ¨ä¸‹æ–¹ï¼š
          </p>
          <input type="password" id="api-key-input" placeholder="è¼¸å…¥ä½ çš„ OpenAI API Keyï¼ˆsk-...ï¼‰" class="mt-4 w-full p-4 border border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-300"/>
          <button id="save-key" class="mt-3 px-6 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700">å„²å­˜ Key</button>
          <p class="mt-3 text-sm text-amber-800">Key åªæœƒå„²å­˜åœ¨ä½ çš„ç€è¦½å™¨æœ¬åœ°ï¼ˆlocalStorageï¼‰ï¼Œçµ•ä¸ä¸Šå‚³åˆ°ä»»ä½•ä¼ºæœå™¨ï¼Œå®‰å…¨å¯é ã€‚</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();

    const transcriptInput = document.getElementById('transcript-input');
    const confirmPaste = document.getElementById('confirm-paste');
    const fileInput = document.getElementById('file-input');
    const contentDisplay = document.getElementById('content-display');
    const originalContent = document.getElementById('original-content');
    const analyzeSection = document.getElementById('analyze-section');
    const analyzeBtn = document.getElementById('analyze-btn');
    const exportBtn = document.getElementById('export-btn');
    const analyzing = document.getElementById('analyzing');
    const result = document.getElementById('result');
    const errorMsg = document.getElementById('error-msg');
    const errorText = document.getElementById('error-text');
    const apiKeyInput = document.getElementById('api-key-input');
    const saveKeyBtn = document.getElementById('save-key');

    let currentTranscript = '';
    let currentAnalysis = null;

    // è®€å–å·²å„²å­˜çš„ OpenAI API Key
    const savedKey = localStorage.getItem('openai_api_key');
    if (savedKey) {
      apiKeyInput.placeholder = 'API Key å·²å„²å­˜ï¼ˆå¯ä¿®æ”¹ï¼‰';
    }

    saveKeyBtn.onclick = () => {
      const key = apiKeyInput.value.trim();
      if (key.startsWith('sk-')) {
        localStorage.setItem('openai_api_key', key);
        alert('OpenAI API Key å·²æˆåŠŸå„²å­˜ï¼');
      } else if (key === '') {
        localStorage.removeItem('openai_api_key');
        alert('å·²æ¸…é™¤ API Key');
      } else {
        alert('è«‹è¼¸å…¥æ­£ç¢ºçš„ OpenAI API Keyï¼ˆä»¥ sk- é–‹é ­ï¼‰');
      }
    };

    // è¼¸å…¥æ¨¡å¼åˆ‡æ›
    document.querySelectorAll('.mode-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.mode-btn').forEach(b => {
          b.classList.remove('active', 'bg-indigo-600', 'text-white');
          b.classList.add('bg-white', 'border', 'border-gray-300', 'text-gray-700');
        });
        btn.classList.remove('bg-white', 'border', 'border-gray-300', 'text-gray-700');
        btn.classList.add('active', 'bg-indigo-600', 'text-white');

        document.getElementById('paste-area').classList.toggle('hidden', btn.id !== 'mode-paste');
        document.getElementById('file-area').classList.toggle('hidden', btn.id !== 'mode-file');

        if (btn.id === 'mode-sample') {
          transcriptInput.value = `æœ€è¿‘ç™¼ç¾ä¸€å€‹è¶…ç´šè³ºéŒ¢çš„ç§˜å¯†ï¼åªéœ€æŠ•è³‡3è¬å…ƒï¼Œä¿è­‰ä¸€å€‹æœˆå…§å›æœ¬ä¸¦è³ºåˆ°10å€ï¼é€™æ˜¯å…§éƒ¨æ¶ˆæ¯ï¼Œåªæœ‰å°‘æ•¸äººçŸ¥é“ï¼Œç¾åœ¨é¦¬ä¸ŠåŠ å…¥ä¸ç„¶å°±æ™šäº†ï¼ç§è¨Šæˆ‘ç²å–åé¡ï¼Œåªæœ‰æœ€å¾Œ5å€‹ä½ç½®ï¼`;
          confirmPaste.click();
        }
      });
    });

    // ç¢ºèªè¼¸å…¥
    confirmPaste.onclick = () => {
      currentTranscript = transcriptInput.value.trim();
      if (!currentTranscript) return alert('è«‹è¼¸å…¥æ–‡å­—ç¨¿å…§å®¹');
      contentDisplay.textContent = currentTranscript;
      originalContent.classList.remove('hidden');
      analyzeSection.classList.remove('hidden');
      result.classList.add('hidden');
      errorMsg.classList.add('hidden');
      exportBtn.classList.add('hidden');
    };

    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = (ev) => {
        currentTranscript = ev.target.result;
        contentDisplay.textContent = currentTranscript;
        originalContent.classList.remove('hidden');
        analyzeSection.classList.remove('hidden');
        result.classList.add('hidden');
        errorMsg.classList.add('hidden');
        exportBtn.classList.add('hidden');
      };
      reader.readAsText(file);
    };

    // é–‹å§‹åˆ†æ
    analyzeBtn.onclick = async () => {
      const apiKey = localStorage.getItem('openai_api_key');
      if (!apiKey) return alert('è«‹å…ˆè¼¸å…¥ä¸¦å„²å­˜ OpenAI API Keyï¼');

      analyzing.classList.remove('hidden');
      analyzeSection.classList.add('hidden');
      result.classList.add('hidden');
      errorMsg.classList.add('hidden');

      try {
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",  // å¯æ”¹æˆ "gpt-4o"ï¼ˆæ›´å¼·ï¼‰æˆ– "gpt-3.5-turbo"
            temperature: 0.3,
            max_tokens: 3000,
            messages: [
              {
                role: "system",
                content: "ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å…§å®¹åˆ†æå¸«ï¼Œæ“…é•·è¾¨è­˜è™›å‡è¨Šæ¯ã€AIç”Ÿæˆå…§å®¹ã€è©é¨™æ‰‹æ³•ï¼Œä¸¦è©•ä¼°å‰µæ–°åƒ¹å€¼ã€‚è«‹åš´æ ¼æŒ‰ç…§æŒ‡å®šçš„ JSON æ ¼å¼å›æ‡‰ï¼Œä¸è¦åŠ å…¥ä»»ä½•å¤šé¤˜æ–‡å­—æˆ– markdownã€‚"
              },
              {
                role: "user",
                content: `è«‹å°ä»¥ä¸‹çŸ­è¦–é »æ–‡å­—ç¨¿é€²è¡Œå¤šç¶­åº¦åˆ†æï¼Œä¸¦ä»¥ç´” JSON æ ¼å¼å›æ‡‰ï¼š

ã€æ–‡å­—ç¨¿å…§å®¹ã€‘
${currentTranscript}

è«‹ä½¿ç”¨ä»¥ä¸‹ JSON çµæ§‹ï¼ˆæ‰€æœ‰æ¬„ä½éƒ½è¦æœ‰ï¼‰ï¼š
{
  "truthRating": 1-5çš„æ•´æ•¸,
  "aiGenerated": "ä½" | "ä¸­" | "é«˜",
  "scamRisk": "ç„¡" | "ä½" | "ä¸­" | "é«˜" | "æ¥µé«˜",
  "innovationValue": "ç„¡" | "ä½" | "ä¸­" | "é«˜" | "çªç ´æ€§",
  "consciousnessLevel": "è©³ç´°æè¿°æ„è­˜å±¤ç´š",
  "recommendation": "å¯ä¿¡" | "è¬¹æ…å°å¾…" | "é«˜åº¦è³ªç–‘" | "é¿å…å‚³æ’­",
  "truthVerification": {
    "factCheck": "äº‹å¯¦æŸ¥æ ¸çµæœ",
    "sourceTracking": "ä¾†æºå¯ä¿¡åº¦",
    "logicConsistency": "é‚è¼¯æ˜¯å¦ä¸€è‡´"
  },
  "aiHallucination": {
    "contentFeatures": "æ˜¯å¦æœ‰AIç”Ÿæˆç‰¹å¾µ",
    "factualErrors": "åˆ—å‡ºæ˜é¡¯äº‹å¯¦éŒ¯èª¤ï¼ˆç„¡å‰‡å¯«ã€Œç„¡ã€ï¼‰",
    "credibilityScore": 1-10çš„æ•´æ•¸
  },
  "scamDetection": {
    "urgencyManipulation": "æœ‰/ç„¡ + èªªæ˜",
    "authorityImpersonation": "æœ‰/ç„¡ + èªªæ˜",
    "emotionalManipulation": "æœ‰/ç„¡ + èªªæ˜",
    "overPromising": "æœ‰/ç„¡ + èªªæ˜"
  },
  "aiInnovation": {
    "technicalInnovation": "æŠ€è¡“å‰µæ–°åº¦",
    "practicalValue": "å¯¦ç”¨åƒ¹å€¼",
    "feasibility": "å¯è¡Œæ€§"
  },
  "redFlags": ["è­¦ç¤º1", "è­¦ç¤º2", ...],
  "positives": ["äº®é»1", "äº®é»2", ...],
  "improvements": ["å»ºè­°1", "å»ºè­°2", ...]
}`
              }
            ]
          })
        });

        if (!response.ok) {
          const err = await response.json();
          throw new Error(err.error?.message || 'API è«‹æ±‚å¤±æ•—');
        }

        const data = await response.json();
        const text = data.choices[0].message.content.trim();

        // ç§»é™¤å¯èƒ½çš„ markdown åŒ…è£
        const jsonText = text.replace(/```json\n?|```/g, '').trim();
        currentAnalysis = JSON.parse(jsonText);

        renderResult(currentAnalysis);
        exportBtn.classList.remove('hidden');
      } catch (err) {
        console.error(err);
        errorText.textContent = err.message.includes('invalid_api_key') ? 'API Key ç„¡æ•ˆï¼Œè«‹æª¢æŸ¥æ˜¯å¦æ­£ç¢º' : err.message;
        errorMsg.classList.remove('hidden');
      } finally {
        analyzing.classList.add('hidden');
        lucide.createIcons();
      }
    };

    // æ¸²æŸ“çµæœï¼ˆèˆ‡ä¹‹å‰å®Œå…¨ç›¸åŒï¼‰
    function renderResult(a) {
      result.innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="p-6 bg-blue-50 rounded-xl border border-blue-200">
            <h4 class="font-bold text-blue-900 flex items-center gap-2 mb-3"><i data-lucide="check-circle" class="w-6 h-6"></i> çœŸå¯¦æ€§è©•ç´š</h4>
            <div class="text-3xl mb-2">${'â­'.repeat(a.truthRating)}${'â˜†'.repeat(5-a.truthRating)}</div>
            <p class="text-blue-800">${a.recommendation}</p>
          </div>
          <div class="p-6 bg-purple-50 rounded-xl border border-purple-200">
            <h4 class="font-bold text-purple-900 flex items-center gap-2 mb-3"><i data-lucide="brain" class="w-6 h-6"></i> AI ç”Ÿæˆå¯èƒ½æ€§</h4>
            <div class="text-3xl font-bold text-purple-700">${a.aiGenerated}</div>
            <p class="text-sm mt-2">å¯ä¿¡åº¦ ${a.aiHallucination.credibilityScore}/10</p>
          </div>
          <div class="p-6 bg-red-50 rounded-xl border border-red-200">
            <h4 class="font-bold text-red-900 flex items-center gap-2 mb-3"><i data-lucide="alert-triangle" class="w-6 h-6"></i> è©é¨™é¢¨éšª</h4>
            <div class="text-3xl font-bold text-red-700">${a.scamRisk}</div>
            <p class="text-sm mt-2">å‰µæ–°åƒ¹å€¼ï¼š${a.innovationValue}</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
          <div class="p-6 bg-white rounded-xl border shadow">
            <h4 class="font-bold mb-4 flex items-center gap-2"><i data-lucide="shield" class="w-6 h-6 text-green-600"></i> çœŸå¯¦æ€§é©—è­‰</h4>
            <ul class="space-y-2 text-sm">
              <li><strong>äº‹å¯¦æŸ¥æ ¸ï¼š</strong>${a.truthVerification.factCheck}</li>
              <li><strong>ä¾†æºè¿½æº¯ï¼š</strong>${a.truthVerification.sourceTracking}</li>
              <li><strong>é‚è¼¯ä¸€è‡´æ€§ï¼š</strong>${a.truthVerification.logicConsistency}</li>
            </ul>
          </div>
          <div class="p-6 bg-white rounded-xl border shadow">
            <h4 class="font-bold mb-4 flex items-center gap-2"><i data-lucide="zap" class="w-6 h-6 text-purple-600"></i> AI å¹»è¦ºè­˜åˆ¥</h4>
            <ul class="space-y-2 text-sm">
              <li><strong>å…§å®¹ç‰¹å¾µï¼š</strong>${a.aiHallucination.contentFeatures}</li>
              <li><strong>äº‹å¯¦éŒ¯èª¤ï¼š</strong>${a.aiHallucination.factualErrors}</li>
            </ul>
          </div>
          <div class="p-6 bg-white rounded-xl border shadow">
            <h4 class="font-bold mb-4 flex items-center gap-2"><i data-lucide="alert-octagon" class="w-6 h-6 text-orange-600"></i> è©é¨™æ‰‹æ³•æª¢æ¸¬</h4>
            <ul class="space-y-2 text-sm">
              <li><strong>ç·Šè¿«æ€§æ“ç¸±ï¼š</strong>${a.scamDetection.urgencyManipulation}</li>
              <li><strong>æ¬Šå¨å†’å……ï¼š</strong>${a.scamDetection.authorityImpersonation}</li>
              <li><strong>æƒ…æ„Ÿæ“æ§ï¼š</strong>${a.scamDetection.emotionalManipulation}</li>
              <li><strong>éåº¦æ‰¿è«¾ï¼š</strong>${a.scamDetection.overPromising}</li>
            </ul>
          </div>
          <div class="p-6 bg-white rounded-xl border shadow">
            <h4 class="font-bold mb-4 flex items-center gap-2"><i data-lucide="trending-up" class="w-6 h-6 text-blue-600"></i> AI å‰µæ–°è©•ä¼°</h4>
            <ul class="space-y-2 text-sm">
              <li><strong>æŠ€è¡“å‰µæ–°ï¼š</strong>${a.aiInnovation.technicalInnovation}</li>
              <li><strong>å¯¦ç”¨åƒ¹å€¼ï¼š</strong>${a.aiInnovation.practicalValue}</li>
              <li><strong>å¯è¡Œæ€§ï¼š</strong>${a.aiInnovation.feasibility}</li>
            </ul>
          </div>
        </div>

        ${a.redFlags.length ? `
        <div class="mt-8 p-6 bg-red-50 rounded-xl border border-red-200">
          <h4 class="font-bold text-red-800 mb-4 flex items-center gap-2"><i data-lucide="flag" class="w-6 h-6"></i> ç´…æ——è­¦ç¤º</h4>
          <ul class="list-disc list-inside space-y-1 text-red-700">
            ${a.redFlags.map(f => `<li>${f}</li>`).join('')}
          </ul>
        </div>` : ''}

        ${a.positives.length ? `
        <div class="mt-8 p-6 bg-green-50 rounded-xl border border-green-200">
          <h4 class="font-bold text-green-800 mb-4 flex items-center gap-2"><i data-lucide="check-circle" class="w-6 h-6"></i> æ­£é¢äº®é»</h4>
          <ul class="list-disc list-inside space-y-1 text-green-700">
            ${a.positives.map(p => `<li>${p}</li>`).join('')}
          </ul>
        </div>` : ''}

        <div class="mt-8 p-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200">
          <h4 class="font-bold text-indigo-900 mb-3">ğŸ§  æ„è­˜å±¤ç´šè©•ä¼°</h4>
          <p class="text-indigo-800 text-lg">${a.consciousnessLevel}</p>
        </div>
      `;
      result.classList.remove('hidden');
      lucide.createIcons();
    }

    // åŒ¯å‡º Markdown
    exportBtn.onclick = () => {
      const timestamp = new Date().toLocaleString('zh-TW');
      const stars = 'â­'.repeat(currentAnalysis.truthRating) + 'â˜†'.repeat(5 - currentAnalysis.truthRating);
      const md = `# çŸ­è¦–é »æ–‡å­—ç¨¿åˆ†æå ±å‘Šï¼ˆChatGPT ç‰ˆï¼‰

## åŸå§‹æ–‡å­—ç¨¿
\`\`\`
${currentTranscript}
\`\`\`

## ç¶œåˆè©•ä¼°æ‘˜è¦
- **çœŸå¯¦æ€§è©•ç´š**: ${stars} (${currentAnalysis.truthRating}/5)
- **AIç”Ÿæˆå¯èƒ½æ€§**: ${currentAnalysis.aiGenerated}
- **è©é¨™é¢¨éšªç­‰ç´š**: ${currentAnalysis.scamRisk}
- **å‰µæ–°åƒ¹å€¼**: ${currentAnalysis.innovationValue}
- **æ„è­˜å±¤ç´š**: ${currentAnalysis.consciousnessLevel}
- **æ•´é«”å»ºè­°**: ${currentAnalysis.recommendation}

## è©³ç´°åˆ†æ
ï¼ˆå®Œæ•´å…§å®¹è«‹æŸ¥çœ‹ç¶²é ç‰ˆï¼‰

*å ±å‘Šç”Ÿæˆæ™‚é–“: ${timestamp}*
`;

      const blob = new Blob([md], { type: 'text/markdown;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `æ–‡å­—ç¨¿åˆ†æå ±å‘Š_ChatGPT_${Date.now()}.md`;
      a.click();
      URL.revokeObjectURL(url);
    };
  </script>
</body>
</html>
